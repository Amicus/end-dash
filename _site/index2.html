<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>End Dash</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/reset.css">

        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">

        <link rel="stylesheet" href="css/style.css">
        <link href='http://fonts.googleapis.com/css?family=Lato:300,400' rel='stylesheet' type='text/css'>
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <nav>
            <div class="logoWrapper">
              <h1>
                  END DASH
              </h1>
              <div class="logoDash"></div>
              <div class="nameDash"></div>
            </div>

            <ul>
                <li><a href="#getting-started">Getting started</a></li>
                <li><a href="#templating-from-models">Templating from models</a></li>
                <li><a href="#building-and-testing">Building and testing</a></li>
                <li><a href="#play-with-examples">Play with examples</a></li>

                <li><a href="#using-model-attributes">Using Model Attributes</a>
                    <ul>
                        <li><a href="#variables">Variables</a></li>
                        <li><a href="#attribute-interpolation">Attribute Interpolation</a></li>
                    </ul>
                </li>
                <li><a href="#inputs">Inputs</a>
                    <ul>
                        <li><a href="#text-inputs">Text Inputs</a></li>
                        <li><a href="#radio-buttons">Radio Buttons</a></li>
                        <li><a href="#checkboxes">Checkboxes</a></li>
                    </ul>
                </li>
                <li><a href="#looping">Looping</a>
                    <ul>
                        <li><a href="#simple-looping">Simple Looping</a></li>
                        <li><a href="#polymorphic-attributes">Polymorphic Attributes</a></li>
                        <li><a href="#collection-attributes">Collection Attributes</a></li>
                    </ul>
                </li>
                <li><a href="#conditionals">Conditionals</a>
                    <ul>
                        <li><a href="#ternary">Ternary</a></li>
                        <li><a href="#visibility-conditionals">Visibility Conditionals</a></li>
                    </ul>
                </li>
                <li><a href="#scoping">Scoping</a>
                    <ul>
                        <li><a href="#what-is-scoping">What is scoping?</a></li>
                        <li><a href="#scoping-down-with-a-dash">Scoping Down with a Dash</a></li>
                        <li><a href="#scoping-with-paths">Scoping With Paths</a></li>
                    </ul>
                </li>
                <li><a href="#presenters">Presenters</a></li>
                <li><a href="#view-integration">View Integration</a></li>
                <li><a href="#partials">Partials</a></li>
                <li><a href="#debugger">Debugger</a></li>
            </ul>
        </nav>

        <div class="container">
            
            <div class="highlight"><pre><code class="text language-text" data-lang="text">        EndDash
</code></pre></div>
<h1></h1>

<p>EndDash is a bindings-aware client-side templating language built on top of valid HTML.</p>

<p><a href="#getting-started">Getting started</a></p>

<p><a href="#templating-from-models">Templating from models</a></p>

<p><a href="#building-and-testing">Building and testing</a></p>

<p><a href="#play-with-examples">Play with examples</a></p>

<p><a href="#documentation">Documentation</a></p>

<h2>Getting started</h2>

<p>Include the library and dependencies:
<code>html
&lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;http://underscorejs.org/underscore.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;http://backbonejs.org/backbone.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;/assets/javascripts/end-dash.js&quot;&gt;&lt;/script&gt;
</code></p>

<h2>Templating from models</h2>

<p>Define your templates:
```html
<script type="text/enddash" name="character">
  <div class="user">
    <p>
      Hello, my name is <span class="firstName-"></span>
      <span class="lastName-"></span>...
    </p></p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">&lt;strong class=&quot;quip-&quot;&gt;&lt;/strong&gt;
</code></pre></div>
<p></div>
</script>
```</p>

<p>Bind templates to models in your application code:
```javascript
$.ready(function() {
  // Load all the templates on the page.
  EndDash.bootstrap();</p>

<p>var tony = new Backbone.Model({
    firstName: &#39;Tony&#39;,
    lastName: &#39;Stark&#39;,
    quip: &quot;You know, the question I get asked most often is, &#39;Tony, how do you go to the bathroom in your suit?&#39;&quot;
  });</p>

<p>var template = EndDash.getTemplate(&#39;character&#39;, tony);</p>

<p>$(&#39;#content&#39;).html(template.el);
});
```</p>

<p>If your model changes, the DOM updates!</p>

<h2>Building and testing</h2>
<div class="highlight"><pre><code class="bash language-bash" data-lang="bash">npm install

<span class="c"># We use grunt for running tasks.</span>
npm install -g grunt-cli

<span class="c"># Build end-dash in build/ directory</span>
grunt build <span class="c"># also aliased as `grunt`</span>

<span class="c"># Run tests</span>
grunt <span class="nb">test</span>

<span class="c"># Watch for changes and run tests</span>
grunt watch
</code></pre></div>
<h2>Play with examples</h2>

<p>If you clone this repo and install grunt as described above
you can play with some end-dash examples in your browser.
Just type <code>grunt</code> in the root directory to build the current
version of end-dash into the build directory, and then
open up any of the example html files in the examples directory
in your browser (<code>open examples/looping.html</code> for example works
on OS X), and you can edit the templates or models directly in the
html file if you want to experiment.</p>

<h1>Documentation</h1>

<p><a href="#using-model-attributes">Using Model Attributes</a>
  * <a href="#variables">Variables</a>
  * <a href="#attribute-interpolation">Attribute Interpolation</a></p>

<p><a href="#inputs">Inputs</a>
  * <a href="#text-inputs">Text Inputs</a>
  * <a href="#radio-buttons">Radio Buttons</a>
  * <a href="#checkboxes">Checkboxes</a></p>

<p><a href="#looping">Looping</a>
  * <a href="#simple-looping">Simple Looping</a>
  * <a href="#polymorphic-attributes">Polymorphic Attributes</a>
  * <a href="#collection-attributes">Collection Attributes</a></p>

<p><a href="#conditionals">Conditionals</a></p>

<p><a href="#scoping">Scoping</a>
  * <a href="#what-is-scoping">What is scoping?</a>
  * <a href="#scoping-down-with-a-dash">Scoping Down with a Dash</a>
  * <a href="#scoping-with-paths">Scoping With Paths</a></p>

<p><a href="#presenters">Presenters</a></p>

<p><a href="#view-integration">View Integration</a></p>

<p><a href="#partials">Partials</a></p>

<p><a href="#debugger">Debugger</a></p>

<h1>Using Model Attributes</h1>

<h2>Variables</h2>

<p>EndDash variables are rendered into the body of HTML elements, displaying their values as ordinary text:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;user-&quot;</span><span class="nt">&gt;</span>
  My name is <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;firstName-&quot;</span><span class="nt">&gt;&lt;/span&gt;</span> <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;lastName-&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>.
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<h2>Attibute Interpolation</h2>

<p>Model properties can also be interpolated into any html tag attribute.</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/person/#{firstName}&#39;</span><span class="nt">&gt;</span> Home Page <span class="nt">&lt;/a&gt;</span>
</code></pre></div><div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="nx">template</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">({</span><span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Derrick&#39;</span><span class="p">}));</span>
</code></pre></div>
<p>Resulting Tag:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/person/Derrick&#39;</span><span class="nt">&gt;</span> Home Page <span class="nt">&lt;/a&gt;</span>
</code></pre></div>
<h1>Inputs</h1>

<p>EndDash does two-way binding between model attributes and input elements.</p>

<h2>Text Inputs</h2>

<p>Text inputs are bound to a referenced attribute on the model in scope.
To create this binding, add the attribute name with a dash at the end as a classname
in the template.</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;p&gt;</span>
  What is your name?
  <span class="nt">&lt;input</span>  <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;name-&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</code></pre></div>
<h2>Radio buttons</h2>

<p>Radio buttons bind the selected button&#39;s value to the model&#39;s referenced attribute.</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;div&gt;</span>
  <span class="nt">&lt;p&gt;</span>Who is your favorite character?<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">class=</span><span class="s">&quot;name-&quot;</span> <span class="na">name=</span><span class="s">&quot;name-&quot;</span> <span class="na">value=</span><span class="s">&quot;tony&quot;</span> <span class="na">id=</span><span class="s">&quot;tony&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;tony&quot;</span><span class="nt">&gt;</span>Tony<span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">class=</span><span class="s">&quot;name-&quot;</span> <span class="na">name=</span><span class="s">&quot;name-&quot;</span> <span class="na">value=</span><span class="s">&quot;pepper&quot;</span> <span class="na">id=</span><span class="s">&quot;pepper&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;pepper&quot;</span><span class="nt">&gt;</span>Pepper<span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">class=</span><span class="s">&quot;name-&quot;</span> <span class="na">name=</span><span class="s">&quot;name-&quot;</span> <span class="na">value=</span><span class="s">&quot;james&quot;</span> <span class="na">id=</span><span class="s">&quot;james&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;james&quot;</span><span class="nt">&gt;</span>James<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<h2>Checkboxes</h2>

<p>Checkboxes are trickier. When unchecked, the referenced attribute on the model will
be &#39;false&#39;. When checked, the referenced model&#39;s attribute will be set to
the attribute value on the input element (or &#39;true&#39; if no value is defined).</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;p&gt;</span>Do you want to receive notifications about Iron Man?<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">name=</span><span class="s">&quot;notifyList&quot;</span> <span class="na">class=</span><span class="s">&quot;notify-&quot;</span> <span class="nt">/&gt;</span>
</code></pre></div>
<h1>Looping</h1>

<h2>Simple Looping</h2>

<p>EndDash lets you loop through objects in a collection.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">characters</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">([</span>
  <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">({</span>
    <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Tony&#39;</span><span class="p">,</span>
    <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Stark&#39;</span><span class="p">,</span>
    <span class="nx">role</span><span class="o">:</span> <span class="s1">&#39;hero&#39;</span>
  <span class="p">}),</span>

  <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">({</span>
    <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Pepper&#39;</span><span class="p">,</span>
    <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Potts&#39;</span><span class="p">,</span>
    <span class="nx">role</span><span class="o">:</span> <span class="s1">&#39;civilian&#39;</span>
  <span class="p">}),</span>

  <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">({</span>
    <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Iron&#39;</span><span class="p">,</span>
    <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Monger&#39;</span><span class="p">,</span>
    <span class="nx">role</span><span class="o">:</span> <span class="s1">&#39;villain&#39;</span>
  <span class="p">}),</span>

  <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">({</span>
    <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;James&#39;</span><span class="p">,</span>
    <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Rhodes&#39;</span><span class="p">,</span>
    <span class="nx">role</span><span class="o">:</span> <span class="s1">&#39;hero&#39;</span>
  <span class="p">})</span>
<span class="p">]);</span>
</code></pre></div><div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;characters-&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">data-each</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;firstName-&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<h2>Polymorphic attributes</h2>

<p>If your objects have an enum (or Enumerated type) field, you can specify handling based on which type it is.
This is best explained with an example.</p>

<p>In this case, <code>role</code> is behaving as a polymorphic attribute.</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;rolePolymorphic-&quot;</span> <span class="na">data-each</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;whenHero-&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;firstName-&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
    says: Don&#39;t worry. I&#39;ll probably save you.
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;whenVillain-&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;firstName-&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;lastName-&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
    says: Worry.<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;whenCivilian-&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;firstName-&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
   says: Get me outta here!
   <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<p>The resulting HTML will be:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">&lt;div class=&quot;rolePolymorphic-&quot; data-each&gt;
  &lt;div class=&quot;whenHero-&quot;&gt;
    &lt;span class=&quot;firstName-&quot;&gt;Tony&lt;/span&gt;
    says: Don&#39;t worry.  I&#39;ll probably save you.
  &lt;/div&gt;
  &lt;div class=&quot;whenCivilian-&quot;&gt;
    &lt;span class=&quot;firstName-&quot;&gt;Piper&lt;/span&gt;
    says: Get me outta here!
  &lt;/div&gt;
  &lt;div class=&quot;whenVillain-&quot;&gt;
    &lt;span class=&quot;firstName-&quot;&gt;Iron&lt;/span&gt;
    &lt;span class=&quot;lastName-&quot;&gt;Monger&lt;/span&gt;
    says: Worry.
  &lt;/div&gt;
  &lt;div class=&quot;whenHero-&quot;&gt;
    &lt;span class=&quot;firstName-&quot;&gt;James&lt;/span&gt;
    says: Don&#39;t worry.  I&#39;ll probably save you.
  &lt;/div&gt;
&lt;/div&gt;
</code></pre></div>
<p>To add a, catch-all, base case; add a child div without a
class name ending in a dash.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">&lt;div class=&#39;rolePolymorphic-&#39;&gt;
  &lt;div class=&quot;whenHero-&quot;&gt;
    &lt;span class=&quot;firstName-&quot;&gt;&lt;/span&gt;
    says: Don&#39;t worry.  I&#39;ll probably save you.
  &lt;/div&gt;
  &lt;div&gt;
    &lt;span class=&quot;firstName-&quot;&gt;&lt;/span&gt;
    says: I&#39;ve lost my memory.  I don&#39;t know who I am!
  &lt;/div&gt;
&lt;/div&gt;
</code></pre></div>
<p>Any models in the collection without the named polymorphic attribute, or with an attribute
value not specified with a <code>whenValue-</code> condition, will have this default template rendered
for them when looping through the collection.</p>

<h2>Collection Attributes</h2>

<p><em>Please note:</em> Backbone.Collection does <em>not</em> support attributes natively for its collections,
but there are a number of options for extending collections to do so.  EndDash supports
collection attributes as long as they are implemented according to Backbone.Model API, via
the <code>get</code> method (which Backbone.Collection natively uses only for getting a model by id,
not an attribute by name).  Typically collection attributes are used for metadata about
the collection, such as total size (if the collection is paginated and this is
different than length), as in the example below:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;authorizedPeople-&quot;</span> <span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    There are <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;totalCount-&quot;</span><span class="nt">&gt;&lt;/span&gt;</span> people allowed in Tony&#39;s basement.
  <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<h1>Conditionals</h1>

<p>A ternary operator is available for presence handling via &#39;truthiness&#39; for attributes
that may be present, with or without a false condition:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;user- #{availability ? available : unavailable}&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    My schedule is very full. <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;isAvailable-&quot;</span><span class="nt">&gt;</span>I just have a few openings<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<p>The same truthiness controls conditional visibility EndDash class elements that start with <code>is</code> or <code>has</code>,
and their boolean opposites <code>isNot</code> and <code>hasNot</code>, as above with <code>isAvailable-</code>.  EndDash will hide (via a
<code>display:none</code> style attribute) any such element when its named attribute is falsy (or hide when truthy in
the case of <code>isNot</code> and <code>hasNot</code>.)</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="nx">template</span><span class="p">.</span><span class="nx">bind</span><span class="p">({</span>
  <span class="nx">user</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">({</span>
    <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Tony&#39;</span><span class="p">,</span>
    <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Stark&#39;</span><span class="p">,</span>
    <span class="nx">alias</span><span class="o">:</span> <span class="s1">&#39;IronMan&#39;</span>
    <span class="nx">availability</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;10am&#39;</span><span class="p">,</span> <span class="s1">&#39;2pm&#39;</span><span class="p">]</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<h1>Scoping</h1>

<h2>What is Scoping?</h2>

<p>Scope in EndDash refers to the model on the top of the EndDash stack.
Each template and partial is given its own scope. The &#39;root&#39; scope is always the object passed
to EndDash&#39;s &#39;bind&#39; or &#39;getTemplate&#39; function.</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="nx">template</span><span class="p">.</span><span class="nx">bind</span><span class="p">({</span>
  <span class="nx">user</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">({</span>
    <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Tony&#39;</span><span class="p">,</span>
    <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Stark&#39;</span><span class="p">,</span>
    <span class="nx">hobby</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;Building all the cool technology&#39;</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">});</span>
</code></pre></div>
<p>The root object is the object literal with the property &#39;user&#39;.</p>

<p>Scope can change in two ways:</p>

<h2>Scoping Down With A Dash</h2>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&#39;user-&#39;</span><span class="nt">&gt;</span>
  //Internal HTML
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<p>Scopes into the Backbone Model with properties: &#39;firstName&#39;, &#39;lastName&#39;, and &#39;hobby&#39;.
This syntax only allows scopping down.</p>

<h2>Scoping With Paths</h2>

<p>(UNIX style)</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&#39;user-&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">data-scope=</span><span class="s">&#39;/&#39;</span><span class="nt">&gt;</span>
    //Iternal HTML
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<p>Scopes down into the user object and then, via the data-scope property, scopes back to the root object
(the object literal with propery &#39;user&#39;).</p>

<p>Normal UNIX path shorthands apply: <code>..</code> to move back up a scope level, <code>/</code> to seperate scope levels,
<code>.</code> for the current scope&#39;.</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&#39;user-&#39;</span><span class="nt">&gt;</span>
  //User scope
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&#39;hobby-&#39;</span><span class="nt">&gt;</span>
  //Hobby scope
    <span class="nt">&lt;div</span> <span class="na">data-scope=</span><span class="s">&#39;../&#39;</span><span class="nt">&gt;</span>
    //Back in User Scope
      <span class="nt">&lt;div</span> <span class="na">data-scope=</span><span class="s">&#39;/user/hobby&#39;</span><span class="nt">&gt;</span>
      //Back in Hobby scope
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<p>&#39;<code>class=&#39;user-&#39;</code> is actually syntatic sugar for <code>data-scope=&#39;./user&#39;</code>.  Using <code>data-scope</code> like this,
at the current scope, is mainly useful for accessing a property of a nested model in the same DOM
element that you change the scope.</p>

<h1>Presenters</h1>

<p>If you wish to follow the Model-View-Presenter pattern, EndDash supports a hook
to specify what presenter to use for a given model.  By default, this function
simple returns the model itself, a simple identity function, but by passing in
your own lookup function to <code>EndDash.setGetPresenter</code> EndDash will run your code
instead to load a presenter if one is found.  Here&#39;s an example getPresenter
function being defined and passed in to EndDash that looks for a custom presenter
in config.presenterDirectory and uses a default base presenter or base collection
presenter when no presenter specific to the model&#39;s name attribute is defined:</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js">  <span class="nx">getPresenter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">modelName</span> <span class="o">=</span> <span class="nx">inflection</span><span class="p">.</span><span class="nx">underscore</span><span class="p">(</span><span class="nx">model</span><span class="p">.</span><span class="nx">name</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
      <span class="p">,</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">model</span><span class="p">.</span><span class="nx">cid</span>
      <span class="p">,</span> <span class="nx">Presenter</span>
      <span class="p">,</span> <span class="nx">basePresenter</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">model</span> <span class="k">instanceof</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">model</span> <span class="k">instanceof</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">))</span>
      <span class="k">return</span> <span class="nx">model</span>
    <span class="c1">//give collections a unique id</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">model</span> <span class="k">instanceof</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">model</span><span class="p">.</span><span class="nx">cid</span><span class="p">)</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">model</span><span class="p">.</span><span class="nx">cid</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">uniqueId</span><span class="p">(</span><span class="s2">&quot;collection&quot;</span><span class="p">)</span>
      <span class="nx">basePresenter</span> <span class="o">=</span> <span class="s2">&quot;/base_collection_presenter&quot;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">basePresenter</span> <span class="o">=</span> <span class="s2">&quot;/base_presenter&quot;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">presenters</span><span class="p">[</span><span class="nx">id</span><span class="p">])</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">presenters</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">Presenter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">presenterDirectory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nx">modelName</span> <span class="o">+</span> <span class="s2">&quot;_presenter&quot;</span><span class="p">)</span>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">code</span> <span class="o">!==</span> <span class="s2">&quot;MODULE_NOT_FOUND&quot;</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">throw</span> <span class="nx">e</span>

        <span class="p">}</span>
        <span class="nx">Presenter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">presenterDirectory</span> <span class="o">+</span> <span class="nx">basePresenter</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">presenters</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Presenter</span><span class="p">(</span><span class="nx">model</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">EndDash</span><span class="p">.</span><span class="nx">setGetPresenter</span><span class="p">(</span><span class="nx">getPresenter</span><span class="p">)</span>
</code></pre></div>
<p>Presenters are useful for wrapping the same model for use in different contexts, and for storing
view specific state not intended to be saved to the server.  Taken further, models may be used as
a repository for persisted data only, and presenters may be used for all behavior and view state,
which is how we use them at Amicus.</p>

<h1>View Integration</h1>

<p>EndDash provides dynamic behavior often otherwise handled by views in Backbone.
If more specific dynamic behavior is required, take advantadge of EndDash&#39;s hooks to Backbone Views. Simply add
the html attribute <code>data-view</code> with the value of your viewName, to the template.</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;div&gt;</span>
  <span class="nt">&lt;h2&gt;</span>
    Configure Iron Man&#39;s suit below:
  <span class="nt">&lt;/h2&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;suit-&quot;</span> <span class="na">data-view=</span><span class="s">&quot;iron_man_suit_view&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;suitConfig&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<p>When EndDash runs into a <code>data-view</code>, it will lookup the view and initalize it with the model
in scope.</p>

<p>To lookup the view, EndDash uses a simple view store. You can register views by
calling <code>EndDash.registerView</code> with the view name and the view class object. You can
also define your own function and pass it into <code>EndDash.setCustomGetView</code></p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="nx">EndDash</span><span class="p">.</span><span class="nx">registerView</span><span class="p">(</span><span class="s1">&#39;myViewName&#39;</span><span class="p">,</span> <span class="nx">viewObj</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="kd">var</span> <span class="nx">views</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="nx">getViews</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">views</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
<span class="p">};</span>
<span class="nx">EndDash</span><span class="p">.</span><span class="nx">setCustomGetView</span><span class="p">(</span><span class="nx">getViews</span><span class="p">);</span>
</code></pre></div>
<h1>Partials</h1>

<p>Small, reusable components of HTML can be templated in EndDash as partials.
One common use for partials is iterating through a collection.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">person1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">({</span><span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Tony&#39;</span><span class="p">,</span> <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Stark&#39;</span><span class="p">,</span> <span class="nx">alias</span><span class="o">:</span> <span class="s1">&#39;IronMan&#39;</span><span class="p">});</span>
<span class="kd">var</span> <span class="nx">person2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">({</span><span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;James&#39;</span><span class="p">,</span> <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Rhodes&#39;</span><span class="p">,</span> <span class="nx">alias</span><span class="o">:</span> <span class="s1">&#39;WarMachine&#39;</span><span class="p">});</span>
<span class="kd">var</span> <span class="nx">person3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">({</span><span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Pepper&#39;</span><span class="p">,</span> <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Potts&#39;</span><span class="p">,</span> <span class="nx">alias</span><span class="o">:</span> <span class="s1">&#39;none&#39;</span> <span class="p">});</span>

<span class="kd">var</span> <span class="nx">people</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">([</span><span class="nx">person1</span><span class="p">,</span> <span class="nx">person2</span><span class="p">,</span> <span class="nx">person3</span><span class="p">]);</span>
</code></pre></div>
<p>Iterate through the collection using data-each.</p>

<p>The data-replace attribute tells EndDash to substitute the partial&#39;s root element for this element.
Without data-replace, EndDash will embed the root element beneath the partial&#39;s element and leave it.</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;h2&gt;</span>Characters<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;h3&gt;</span>Cast of characters include:<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">&quot;members_list&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;thead&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;th&gt;</span>First Name<span class="nt">&lt;/th&gt;</span>
      <span class="nt">&lt;th&gt;</span>Last Name<span class="nt">&lt;/th&gt;</span>
      <span class="nt">&lt;th&gt;</span>Alias<span class="nt">&lt;/th&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;/thead&gt;</span>
  <span class="nt">&lt;tbody</span> <span class="na">class=</span><span class="s">&quot;people-&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">data-each</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">src=</span><span class="s">&#39;./partials/person&#39;</span> <span class="na">data-replace</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/tbody&gt;</span>
<span class="nt">&lt;/table&gt;</span>
</code></pre></div>
<p>and in your partials folder another EndDash template such as:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;userRow&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;firstName-&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
  <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;lastName-&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
  <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;alias-&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
</code></pre></div>
<h1>Debugger</h1>

<h2>Debugging</h2>

<p>Open up a debugger in development mode to inspect the context of the
template.</p>

<p>Open a context in the highest template scope:
<code>html
&lt;body&gt;
  &lt;div debugger /&gt;
&lt;/body&gt;
</code></p>

<p>In a child model scope:
<code>html
&lt;body&gt;
  &lt;div class=&quot;questions-&quot;&gt;
    &lt;!-- Open a debugger in the scope of get(&#39;questions&#39;) --&gt;
    &lt;div debugger /&gt;
  &lt;/div&gt;
&lt;/body&gt;
</code></p>


            <p>You can also see some of them here:</p>
            <div id="attributes"></div>
            <div id="inputs"></div>
            <div id="inputs2"></div>
            <code id="template-edit" contenteditable>&lt;div&gt;&lt;!--Enter your own EndDash template here!--&gt;
            &lt;div class="isName-"&gt;Hi &lt;span class="name-"&gt;!&lt;/span&gt;&lt;/div&gt;
            &lt;div class="isNotName-"&gt;I don't know your name!&lt;/div&gt;&lt;/div&gt;
            </code>
            <br/>
            <code id="model-edit" contenteditable>new Backbone.Model({text: "Edit this Backbone Model by adding a name attribute to see the text below change!"})</code>
            <p> The results of your template and model or collection above can be previewed below:</p>
            <div id="user-edit"></div>

        <footer>
            <h1>We're Hiring!</h1>
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X');ga('send','pageview');
        </script>
    </body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://underscorejs.org/underscore.js"></script>
    <script src="http://backbonejs.org/backbone.js"></script>
    <script src="js/interaction.js"></script>
    <script src="js/end-dash.min.js"></script>
    <script type="text/enddash" name="suitColor">
    <div>
      <input type="radio" class="color-" name="color-" value="Red" id="classic"/>
      <label for="classic">Classic</label>
      <input type="radio" class="color-" name="color-" value="Brown" id="brown"/>
      <label for="brown">Brown</label>
      <input type="radio" class="color-" name="color-" value="Pink" id="pink"/>
      <label for="pink">Pink</label>
      <p>The <span class='#{color}' style='color:#{color}'>Iron Man suit</span> is <span class="color-"></span></p>
    </div>

    </script>

    <script type="text/javascript">
    $(function() {
      // Load all the templates on the page.
      EndDash.bootstrap();

      var color = new Backbone.Model({
        color: 'Red'
      });

      var template = EndDash.getTemplate('suitColor', color);

      $('#attributes').html(template.el);
    });
    </script>
  <script type="text/enddash" name="inputName">
    <div>
      <p>
        What is your name?
        <input  type="text" class="name-">
      </p>
      <p>
        Your name is <span class='name-'></span>.
      </p>
    </div>
  </script>

  <script type="text/enddash" name="whichCharacter">
  <div>
    <p>Love to hate?</p>
    <input type="checkbox" class="disliked-"/>
    <p>Who is your <span class="isDisliked-">least</span> favorite character?</p>
    <input type="radio" class="name-" name="name-" value="Tony" id="tony"/>
    <label for="tony">Tony</label>
    <input type="radio" class="name-" name="name-" value="Pepper" id="pepper"/>
    <label for="pepper">Pepper</label>
    <input type="radio" class="name-" name="name-" value="James" id="james"/>
    <label for="james">James</label>
    <p>Wow! Your <span class="isDisliked-">least</span> favorite character is <span class='name-'></name></p>
  </div>
  </script>

  <script type="text/javascript">
    $(function() {
      // Load all the templates on the page.
      EndDash.bootstrap();

      var you = new Backbone.Model({
        name: 'YourName',
      });

      var extremeCharacter = new Backbone.Model({
        name: 'Tony'
      });

      var template = EndDash.getTemplate('inputName', you),
          template2 = EndDash.getTemplate('whichCharacter', extremeCharacter);

      $('#inputs').html(template.el);
      $('#inputs2').html(template2.el);
    });
  </script>

  <script type="text/javascript">
    $(function() {
      // Load all the templates on the page.
      var render = function(){
        try {
          var modelText = $('#model-edit').text(),
              templateText = $('#template-edit').text();
          EndDash.registerTemplate('custom', templateText);

          var template = EndDash.getTemplate('custom', eval(modelText));
          $('#user-edit').html(template.el);
        }
        catch(error) {
           console.log("Error occurred:", error)
        }
      };
      render();
      $('#model-edit').on('change keyup keydown', render);
      $('#template-edit').on('change keyup keydown', render);

    });
  </script>
</html>